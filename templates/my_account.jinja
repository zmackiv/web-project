{% extends "__main.jinja" %}

{% block content %}
    <main>

    {% if 'authenticated' not in session %}
        <p>Nejste přihlášeni.</p>
        <a href="{{ url_for("view_account_page") }}">
            <button type="button">Přihlásit</button>
        </a>
    {% endif %}

    {% if session['authenticated'] %}
    <section>
    <h2>  Údaje o uživatelském účtu:</h2>
    <p>  Jméno a příjmení: {{session['jmeno']}} {{session['prijmeni']}} </p>
    <p> Email: {{session['email']}}</p><br><br><br><br>


    <a href="{{ url_for("logout") }}">
        <button id="logout-button" type="Button">Odhlásit se</button>
    </a>

    </section>
    {% endif %}

    {% if session['authenticated'] and session['role'] == 'klient' %}
        <section>
            <h2>Aktuální rezervace:</h2>
            <table>
                <tr>
                    <th>ID objednávky</th>
                    <th>Datum</th>
                    <th>Cas od</th>
                    <th>Cas do</th>
                    <th>Adresa doruceni</th>
                    <th>Vzdalenost doruceni</th>
                    <th>Poznamka</th>
                    <th>Cena</th>
                    <th>Stroj</th>
                    <th>Potvrzeno</th>
                </tr>
                {% for order in future_orders %}
                    <tr>
                        <td>{{ order.id_objednavka }}</td>
                        <td>{{ order.datum }}</td>
                        <td>{{ order.cas_od }}</td>
                        <td>{{ order.cas_do }}</td>
                        <td>{{ order.adresa_doruceni }}</td>
                        <td>{{ order.vzdalenost_doruceni }}</td>
                        <td>{{ order.poznamka }}</td>
                        <td>{{ order.cena }}</td>
                        <td>{{ order.model }}</td>
                        <td>{{ order.potvrzeni }}</td>
                    </tr>
                {% endfor %}
            </table>
        </section>

        <section>
            <h2>Minulé rezervace:</h2>
            <table>
                <tr>
                    <th>ID objednávky</th>
                    <th>Datum</th>
                    <th>Cas od</th>
                    <th>Cas do</th>
                    <th>Adresa doruceni</th>
                    <th>Vzdalenost doruceni</th>
                    <th>Poznamka</th>
                    <th>Cena</th>
                    <th>Stroj</th>
                    <th>Potvrzeno</th>
                </tr>
                {% for order in past_orders %}
                    <tr>
                        <td>{{ order.id_objednavka }}</td>
                        <td>{{ order.datum }}</td>
                        <td>{{ order.cas_od }}</td>
                        <td>{{ order.cas_do }}</td>
                        <td>{{ order.adresa_doruceni }}</td>
                        <td>{{ order.vzdalenost_doruceni }}</td>
                        <td>{{ order.poznamka }}</td>
                        <td>{{ order.cena }}</td>
                        <td>{{ order.model }}</td>
                        <td>{{ order.potvrzeni }}</td>
                    </tr>
                {% endfor %}
            </table>
        </section>
    {% endif %}

    {% if session['authenticated'] and session['role'] == 'dispecer' %}
        <section class='side-by-side'>
            <div>
            <h2>Přidat nový stroj:</h2>
            <form method=post>
            <dl>
              {{ render_field(new_product_form.model, class="form-control") }}
              {{ render_field(new_product_form.popis, class="form-control") }}
              {{ render_field(new_product_form.hod_cena, class="form-control") }}
              {{ render_field(new_product_form.doprava, class="form-control") }}
              {{ render_field(new_product_form.foto, class="form-control") }}
              {{ render_field(new_product_form.typy_stroje, class="form-control") }}
            </dl><br>
            <button type="submit">Přidat</button>
            </form>
            </div>
        </section>
    {% endif %}

</main>
{% endblock %}